# KK Tires CRM - Environment Variables
# Copy this file to .env.local and fill in the values

# ===========================================
# DATABASE (SQLite / Turso libSQL)
# ===========================================
# Preferred
DATABASE_URL=libsql://your-database.turso.io
DATABASE_AUTH_TOKEN=your-turso-auth-token

# Backward compatible (optional)
TURSO_DATABASE_URL=
TURSO_AUTH_TOKEN=

# ===========================================
# AUTHENTICATION (NextAuth.js)
# ===========================================
NEXTAUTH_SECRET=generate-a-secure-random-string
NEXTAUTH_URL=http://localhost:3000

# Google OAuth (optional)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Only allow explicitly approved users to sign in (comma-separated emails)
AUTH_ALLOWED_EMAILS=owner@kktires.gr,admin@kktires.gr

# Debug Auth.js / NextAuth (prints detailed logs + enables `/api/debug/auth-state`)
AUTH_DEBUG=0

# Single-org default (optional)
DEFAULT_ORG_ID=org_kktires

# Dangerous admin endpoints (default disabled)
ENABLE_SEED_ENDPOINT=false
ENABLE_MIGRATE_ENDPOINT=false

# ===========================================
# GOOGLE APIS
# ===========================================
# Client-side key for the Map page
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# Server-side key for Geocoding (used by `/api/cron/geocode-customers` and manual backfill)
# If not set, the app will fall back to `NEXT_PUBLIC_GOOGLE_MAPS_API_KEY`.
GOOGLE_GEOCODING_API_KEY=your-google-geocoding-api-key

# ===========================================
# SMTP (required for all email sending)
# ===========================================
# Configure SMTP from your hosting provider (cPanel/mail server).
# The campaign/direct email send path is SMTP-only.
# If you use email-link login, it also uses these SMTP credentials.
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=info@kktires.gr
SMTP_PASS=
SMTP_FROM=info@kktires.gr

# ===========================================
# EMAIL ASSET STORAGE (required for image/file uploads in composer)
# ===========================================
BLOB_READ_WRITE_TOKEN=

# ===========================================
# AI / MELTEMI
# ===========================================
HUGGINGFACE_API_KEY=your-huggingface-api-key
MELTEMI_MODEL=ilsp/Meltemi-7B-v1

# ===========================================
# EMAIL TRACKING / SECURITY
# ===========================================
# Used to sign tracking links/pixels
EMAIL_TRACKING_SECRET=generate-a-long-random-string

# Used to encrypt OAuth tokens at rest (base64-encoded 32 bytes)
OAUTH_TOKEN_ENCRYPTION_KEY=base64-32-bytes

# ===========================================
# EXTERNAL SCHEDULER (EMAIL JOB PROCESSOR)
# ===========================================
# Required in production: lock down `/api/cron/*` routes
# Supported auth patterns:
# - Authorization: Bearer <CRON_SECRET>
# - x-cron-secret: <CRON_SECRET>
# - query param: ?cron_secret=<CRON_SECRET>
CRON_SECRET=

# Optional tuning (safe defaults are built-in)
EMAIL_CRON_TIME_BUDGET_MS=8000
EMAIL_CRON_MAX_JOBS=5
EMAIL_JOB_MAX_ITEMS_PER_RUN=450
EMAIL_JOB_CONCURRENCY=4
EMAIL_JOB_YIELD_DELAY_MS=0
EMAIL_JOB_LOCK_TIMEOUT_MS=900000
EMAIL_ASSET_CLEANUP_ENABLED=1
EMAIL_ASSET_CLEANUP_HOURS=24
EMAIL_ASSET_CLEANUP_LIMIT=200

# ===========================================
# APPLICATION SETTINGS
# ===========================================
# For local dev you can set NODE_ENV, but on Vercel you should not override it.
# NODE_ENV=development
